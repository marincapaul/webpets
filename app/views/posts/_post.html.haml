%li.mb-6
  .w-full.rounded-lg.shadow.border.md:mt-0.sm:max-w-lg.xl:p-0.bg-gray-800.border-gray-700
    .p-6.space-y-4.md:space-y-6.sm:p-8
      %div.font-bold.leading-tight.tracking-tight.md:text-2xl.text-white
        .items-center
          .flex.items-center
            -if post.pet.avatar.present?
              = image_tag post.pet.avatar, class: "img-thumbnail w-10 h-10 rounded-full object-cover", id: "imgNew"
            - else 
              %img#imgNew.img-fluid.img-thumbnail.w-8.h-8.mx-1.rounded-full.object-cover{:src => image_path('dog_paw.png')}/
            %p= link_to post.pet.name, post.pet
          - if post.media.attached?
            .py-5
              .relative.carousel-height.overflow-hidden.rounded-lg
                = image_tag post.media.first, class: "block w-full h-full object-contain"        
          %p= post.content
          %p.text-base.italic= time_ago_in_words(post.created_at) + " ago"
          .items-center.flex
            - unless post.treats.find_by(owner_id: current_owner.id).blank?
              = link_to post_treat_path(post, current_owner), method: :delete do
                .h-8.w-8.mt-2.hover:-rotate-45
                  %svg{:style => "color: white", :viewbox => "0 0 576 512", :xmlns => "http://www.w3.org/2000/svg"}
                    / ! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.
                    %path{:d => "M534.9 267.5C560.1 280 576 305.8 576 334v4.387c0 35.55-23.49 68.35-58.24 75.88c-38.18 8.264-74.96-13.73-86.76-49.14c-.0352-.1035-.0684-.207-.1035-.3125C425.3 347.7 409.6 336 391.6 336H184.4c-17.89 0-33.63 11.57-39.23 28.56L145 365.1c-11.8 35.41-48.58 57.4-86.76 49.14C23.49 406.7 0 373.9 0 338.4v-4.387C0 305.8 15.88 280 41.13 267.5c9.375-4.75 9.375-18.25 0-23C15.88 232 0 206.3 0 178V173.6c0-35.55 23.49-68.35 58.24-75.88c38.18-8.264 74.99 13.82 86.79 49.23C150.7 164.1 166.4 176 184.4 176h207.2c17.89 0 33.63-11.57 39.23-28.56L431 146.9c11.8-35.41 48.58-57.4 86.76-49.14C552.5 105.3 576 138.1 576 173.6v4.387C576 206.3 560.1 232 534.9 244.5C525.5 249.3 525.5 262.8 534.9 267.5z", :fill => "white"}     
              %span.text-base.ml-1.mt-4= post.treats.count
            - else
              = form_with(model: [post, post.treats.build]) do |f|
                = f.hidden_field :owner_id, value: current_owner.id 
                = f.hidden_field :post, value: post.id 
                .flex.items-center         
                  = f.button :type => 'submit' do
                    .h-8.w-8.mt-2.hover:-rotate-45
                      %svg{:style => "color: white", :viewbox => "-30 0 630 512", :xmlns => "http://www.w3.org/2000/svg"}
                        / ! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.
                        %path{:d => "M534.9 267.5C560.1 280 576 305.8 576 334v4.387c0 35.55-23.49 68.35-58.24 75.88c-38.18 8.264-74.96-13.73-86.76-49.14c-.0352-.1035-.0684-.207-.1035-.3125C425.3 347.7 409.6 336 391.6 336H184.4c-17.89 0-33.63 11.57-39.23 28.56L145 365.1c-11.8 35.41-48.58 57.4-86.76 49.14C23.49 406.7 0 373.9 0 338.4v-4.387C0 305.8 15.88 280 41.13 267.5c9.375-4.75 9.375-18.25 0-23C15.88 232 0 206.3 0 178V173.6c0-35.55 23.49-68.35 58.24-75.88c38.18-8.264 74.99 13.82 86.79 49.23C150.7 164.1 166.4 176 184.4 176h207.2c17.89 0 33.63-11.57 39.23-28.56L431 146.9c11.8-35.41 48.58-57.4 86.76-49.14C552.5 105.3 576 138.1 576 173.6v4.387C576 206.3 560.1 232 534.9 244.5C525.5 249.3 525.5 262.8 534.9 267.5z", :fill => "none", stroke:"white", "stroke-width" => "50"}
                  %span.text-base.ml-1.mt-4= post.treats.count
            .items-center
              %button#comment-icon-button.text-white.inline.focus:outline-none.rounded-full.ml-4.mt-2{onclick: "showComments(#{post.id})"}
                %svg.bi.bi-chat-dots{:fill => "currentColor", :height => "24", :viewbox => "0 0 16 16", :width => "24", :xmlns => "http://www.w3.org/2000/svg"}
                  %path{:d => "M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}
                  %path{:d => "m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"}
              %span.text-base= post.comments.count
          %div.ml-4{:id => "comment-form-#{post.id}", class: "hidden"}
            = form_with(model: [post, post.comments.build]) do |f|
              .form-group
                .text-base
                  -# = f.label :pet_id, "Post it as:"
                  -# %br/
                  -# = f.select :pet_id, @current_pets, { }, { class: 'border sm:text-base rounded-lg blockp-1.5 mb-2 p-2 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500' }
                = f.text_area :body,:placeholder => "Write a reply!", required: true, class: 'border sm:text-base rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500'
              .flex.flex-row.items-center
                %div{class: "basis-1/2"}
                  %button.btn.text-white.focus:ring-4.focus:outline-none.font-medium.rounded-lg.text-sm.px-5.my-2.text-center.bg-primary-600.hover:bg-primary-700.focus:ring-primary-800
                    = f.submit "Post!", class: 'py-2.5', role: "button"
                %div{class: "basis-1/2 text-base"}
                  Post it as:
                  = f.select :pet_id, @current_pets, { }, { class: 'border sm:text-base rounded-lg block w-full p-1.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500' }
            %ul
              = render post.comments

